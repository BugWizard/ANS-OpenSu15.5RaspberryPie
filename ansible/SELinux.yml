- name: Enforcing SELinux
  hosts: [OpenSUSE]
  become: yes
  
  tasks:
    - name: Enforce SELinux
      ansible.posix.selinux:
        state: enforcing
        policy: targeted
      register: selinux_status

    - name: Reboot the machine
      ansible.builtin.reboot:
      when: selinux_status is changed